{% extends 'base.html' %}

{% load static %}

{% block additional_css %}
  <link href="{% static "data-tables/css/jquery.dataTables.min.css" %}" rel="stylesheet">
  <link href="{% static "data-tables/css/jquery.dataTables_themeroller.css" %}" rel="stylesheet">
{% endblock additional_css %}

{% block content %}
  <h2>List of members</h2>

  <br>

  {% if members %}
    <div class="content-panel">
      <div class="panel-heading"></div>
      <div class="panel-body">
        <table id="members-table" class="table">
          <thead>
            <tr>
              <th></th>
              <th>Player</th>
              <th>Meetups attended</th>
              <th>Games played</th>
              <th>Wins</th>
              <th>Loses</th>
              <th>Coefficient</th>
            </tr>
          </thead>
          <tbody>
            {% for member in members %}
              <tr>
                <td></td>
                <td>{{ member.name }}</td>
                <td>{{ member.meetups_attended }}</td>
                <td>{{ member.games_played }}</td>
                <td>{{ member.count_wins }}</td>
                <td>{{ member.count_loses }}</td>
                <td>{{ member.win_lose_coefficient }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div><!-- ./content-panel -->
  {% endif %}
{% endblock content %}

{% block additional-scripts %}
  <script src="{% static "data-tables/js/jquery.dataTables.min.js" %}" type="text/javascript"></script>

  <script>
    // enable dataTable
    $(document).ready(function () {
      var t = $("#members-table").DataTable({
        "paging": false,
        "info": false,
        "filter": false,
        "order": [[ 6, "desc" ]]
      });

      t.on( 'order.dt search.dt', function () {
        t.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
            cell.innerHTML = i+1;
        } );
    } ).draw();
    });
  </script>
{% endblock additional-scripts %}